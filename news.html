<!DOCTYPE html>
<html lang="pl">
<head>
  <!-- Basics -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>News | Polacy Rodacy</title>

  <!-- SEO -->
  <meta name="description" content="Polacy Rodacy is a Polish Brawl Stars esports team. Tournaments, roster, results, and competitive Brawl Stars content.">
  <meta name="keywords" content="Polacy Rodacy, Brawl Stars esports, Brawl Stars team, Polish esports, Brawl Stars tournaments, Poland, esport">
  <meta name="author" content="Polacy Rodacy">
  <meta name="robots" content="index, follow">

  <!-- Open Graph (Discord / Facebook / Liquipedia) -->
  <meta property="og:title" content="Polacy Rodacy â€“ Esports Team">
  <meta property="og:description" content="Official website of Polacy Rodacy, Polish Brawl Stars esports team.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://polacyrodacy.github.io/Main/">
  <meta property="og:image" content="https://polacyrodacy.github.io/Main/assets/images/og-main.jpg">

  <!-- Twitter / X -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Polacy Rodacy â€“ Brawl Stars Esports Team">
  <meta name="twitter:description" content="Official website of Polacy Rodacy, Polish Brawl Stars esports team.">
  <meta name="twitter:image" content="https://polacyrodacy.github.io/Main/assets/images/og-main.jpg">

  <!-- Icons & Styles -->
  <link rel="icon" type="image/png" href="assets/images/PR.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="style/style.css">
</head>

    <nav class="navbar">
  <div class="nav-container">
    <div class="nav-logo">
      <img src="assets/images/PR.png" alt="Polacy Rodacy Logo">
    </div>

    <ul class="nav-links">
      <li><a href="/Main/index.html">Home</a></li>
      <li><a href="#team">Team</a></li>
      <li><a href="#tournaments">Tournaments</a></li>
      <li><a href="#next-tournament">Next</a></li>
      <li><a href="#timeline">Timeline</a></li>
      <li><a href="/Main/news.html">News</a></li>
      <li><a href="/Main/rumours.html">Rumours</a></li>
      <li><a href="/Main/teams.html">Teams</a></li>
    </ul>

    <div class="nav-toggle">&#9776;</div>
  </div>
</nav>

<!-- PANEL BOCZNY I OVERLAY -->
<div class="nav-overlay"></div>
<div class="nav-panel">
  <ul>
    <li><a href="/Main/index.html">Home</a></li>
    <li><a href="#team">Team</a></li>
    <li><a href="#tournaments">Tournaments</a></li>
    <li><a href="#next-tournament">Next</a></li>
    <li><a href="#timeline">Timeline</a></li>
    <li><a href="/Main/news.html">News</a></li>
    <li><a href="/Main/rumours.html">Rumours</a></li>
    <li><a href="/Main/teams.html">Teams</a></li>
  </ul>
</div>
  <header><h1>#BRAWL STARS NEWS</h1></header>

  <main id="news-list" class="news-grid">
    <p>Loading...</p>
  </main>

  <footer>
  <div class="footer-content">
    <div class="footer-column">
      <h3>POLACY RODACY</h3>
      <p>Competitive Brawl Stars team representing Poland and Europe.</p>
    </div>

    <div class="footer-column">
      <h3>Quick Links</h3>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="teams.html">Teams</a></li>
        <li><a href="news.html">News</a></li>
        <li><a href="rumours.html">Rumours</a></li>
      </ul>
    </div>

    <div class="footer-column">
      <h3>Contact</h3>
      <p>Follow us on:</p>
      <div class="footer-social">
        <a href="https://discord.gg/yxAfBwUXcu" target="_blank" aria-label="Discord"><i class="fab fa-discord"></i></a>
        <a href="https://x.com/Polacy_Rodacy" target="_blank" aria-label="X (Twitter)"><i class="fab fa-x-twitter"></i></a>
        <a href="https://www.youtube.com/@Polacy_Rodacy" target="_blank" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
      </div>
    </div>
  </div>

  <div class="footer-bottom">
    <p>&copy; 2024-2026 Polacy Rodacy. All rights reserved.</p>
  </div>
</footer>

<script>
(async function(){
  const repoRawBase = "https://raw.githubusercontent.com/polacyrodacy/Main/main/news/";
  const listEl = document.getElementById('news-list');

  try {
    const res = await fetch(repoRawBase + "index.json");
    if (!res.ok) {
      const txt = await res.text();
      console.error("index.json fetch not OK:", res.status, txt);
      listEl.innerHTML = `<p style="color:red;">Failed to load index.json (HTTP ${res.status}). Check repo path.</p>`;
      return;
    }

    // verify content-type or try parse
    const contentType = res.headers.get('content-type') || '';
    let posts;
    if (contentType.includes('application/json')) {
      posts = await res.json();
    } else {
      // try to parse but print raw if fails
      const raw = await res.text();
      try { posts = JSON.parse(raw); }
      catch(e){
        console.error("index.json is not valid JSON. Raw response:", raw);
        listEl.innerHTML = `<p style="color:red;">index.json is invalid JSON â€” open raw URL in browser to inspect. Check console.</p>`;
        return;
      }
    }

    if (!Array.isArray(posts) || posts.length === 0) {
      listEl.innerHTML = "<p>No news found ðŸ˜”</p>";
      return;
    }

    // render cards (with image if present)
    listEl.innerHTML = '';
    posts.sort((a,b)=> new Date(b.date) - new Date(a.date));
    posts.forEach((post) => {
      const imgSrc = post.image || 'assets/images/PR.png'; // fallback
      const card = document.createElement('article');
      card.className = 'news-card';
      card.innerHTML = `
        <a href="post.html?date=${encodeURIComponent(post.date)}" style="display:block;text-decoration:none;color:inherit;">
          <img src="${imgSrc}" alt="${post.title}" style="width:100%;height:160px;object-fit:cover;display:block;">
          <div class="news-card-content">
            <h3>${post.title}</h3>
            <small>${post.date}</small>
          </div>
        </a>
      `;
      listEl.appendChild(card);
    });

  } catch(err) {
    console.error("Fetch error:", err);
    listEl.innerHTML = `<p style="color:red;">Network/error fetching index.json â€” open console for details.</p>`;
  }
})();
</script>
<script src="scripts/nav.js"></script>
<script src="scripts/day-night.js"></script>
</body>
</html>
